(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const w=`<div class="text-wrapper">
	<div class='text-extra-boarder'>
		<textarea class="text" readonly>{{ text }}</textarea>
	</div>
</div>
<div class="children"></div>`;class A{addChild(t){this.children.push(t)}getDataAtDepth(t,r){const i=this.getData(r);if(t==0)return i!==void 0?[i]:void 0;if(this.children==null){console.log("no children");return}var e=[];if(this.children.forEach(s=>{var a=s.getDataAtDepth(t-1,r);a!==void 0&&a.forEach(h=>{e.push(h)})}),e.length!=0)return e}constructor(t){t==null?this.children=[]:this.children=t}setData(t,r){this.data[t]=r}getData(t){return this.data[t]}getChildren(){return this.children}data={};children}class d{addToCanvas(){this.parent==null&&this.canvas.insertAdjacentElement("beforeend",this.wrapper)}updateChildWidth(){if(this.parent!==null){this.parent.updateChildWidth();return}const t=this.getWidthTree();for(var r=[],i=0;;){const a=t.getDataAtDepth(i,"width");if(a==null)break;var e=0;a.forEach(h=>{h>e&&(e=h)}),r.push(e),i++}const s=r[0];s!==void 0&&this.updateWidth(s,r.slice(1))}getWidthTree(){var t=new A;return t.setData("width",this.getWidth()),this.children.length==0||this.children.forEach(r=>{t.addChild(r.getWidthTree())}),t}updateWidth(t,r){if(this.textWrapper.style.width=t+"px",r.length!==0){const i=r[0];i!==void 0&&this.children.forEach(e=>{e.updateWidth(i,r.slice(1))})}}checkWidthUpdate=()=>{this.textArea.offsetWidth!==this.lastTextAreaWidth&&(this.parent!==null?this.parent.updateChildWidth():this.updateChildWidth(),this.lastTextAreaWidth=this.textArea.offsetWidth)};save(){return JSON.parse('{			"name":"test"		}')}load(t){throw new Error("Method not implemented.")}setParent(t){this.parent=t,this.wrapper.style.position="initial"}removeParent(t){this.wrapper.style.position="absolute",this.parent=null,this.addToCanvas()}addChild(t){this.childArea.insertBefore(t.getWrapper(),null),this.children.push(t),t.setParent(this)}removeChild(t){if(this.children.includes(t)){t.removeParent(this);var r=this.children.indexOf(t);this.children.splice(r,1),this.childArea.removeChild(t.getWrapper())}}dblClick=t=>{t.preventDefault();const r=Number(this.textArea.dataset.caret??0);this.textArea.readOnly=!1,this.textArea.focus(),this.textArea.setSelectionRange(r,r),this.textArea.classList.toggle("selection-disabled",!1),this.textArea.addEventListener("focusout",this.lock),this.textArea.removeEventListener("dblclick",this.dblClick)};lock=t=>{this.textArea.removeEventListener("focusout",this.lock),this.textArea.addEventListener("dblclick",this.dblClick),this.textArea.readOnly=!0,this.textArea.blur(),this.wrapper.focus(),this.textArea.classList.toggle("selection-disabled",!0)};trackCaretPosition=t=>{this.textArea.readOnly&&(this.textArea.dataset.caret=String(this.textArea.selectionStart??0))};startDrag=t=>{document.activeElement===this.textArea||this.parent!==null||(this.Xmouse=t.clientX,this.Ymouse=t.clientY,document.addEventListener("mouseup",this.stopDrag),document.addEventListener("mousemove",this.elementDrag))};elementDrag=t=>{t.preventDefault();var r=this.Xmouse-t.clientX,i=this.Ymouse-t.clientY;this.Xmouse=t.clientX,this.Ymouse=t.clientY,this.Xpos-=r,this.Ypos-=i,this.setPos(this.Xpos,this.Ypos)};stopDrag=t=>{document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("mousemove",this.elementDrag),this.textArea.blur(),this.wrapper.focus()};setPos(t,r){this.wrapper.style.left=t+"px",this.wrapper.style.top=r+"px"}constructor(t,r){this.parent=null,this.canvas=t;var i,e;if(r!==void 0&&(i=r.text,e=r.pos),i==null&&(i=""),this.Xpos=0,this.Ypos=0,e!==void 0)this.Xpos=e.x,this.Ypos=e.y;else{var s=window.innerWidth/2,a=window.innerHeight/2,h=t.offsetLeft,x=t.offsetTop;this.Xpos=s-h,this.Ypos=a-x}this.children=[];var g=w.replace("{{ text }}",i);this.Xmouse=0,this.Ymouse=0,this.wrapper=document.createElement("div"),this.wrapper.setAttribute("class","tree-node"),this.setPos(this.Xpos,this.Ypos),this.wrapper.innerHTML=g,this.wrapper.style.position="absolute";const l=this.wrapper.getElementsByTagName("textarea")[0];if(l!==void 0)this.textArea=l;else throw new Error("Error: textarea element not found");const c=this.wrapper.getElementsByClassName("children")[0];if(c!==void 0)this.childArea=c;else throw new Error("Children class not found");this.textArea.addEventListener("dblclick",this.dblClick),this.textArea.addEventListener("mousedown",this.trackCaretPosition),this.textArea.classList.toggle("selection-disabled",!0),this.textArea.addEventListener("mousedown",this.startDrag),this.lastTextAreaWidth=this.textArea.offsetWidth,this.textArea.addEventListener("input",this.checkWidthUpdate);const p=this.wrapper.getElementsByClassName("text-wrapper")[0];if(p!=null)this.textWrapper=p;else throw new Error("text-wrapper class not found");this.addToCanvas()}getWrapper(){return this.wrapper}getWidth(){return this.textArea.offsetWidth+4}lastTextAreaWidth;canvas;wrapper;textWrapper;textArea;childArea;children;parent;Xmouse;Ymouse;Xpos;Ypos}const n=document.getElementById("canvas");if(n!==null){var u=new d(n,{text:"1asdfasdfadsf",pos:{x:50,y:100}}),f=new d(n,{text:"2"}),v=new d(n,{text:"3"}),m=new d(n),W=new d(n,{text:"4"}),C=new d(n,{text:"5"});u.addChild(f),u.addChild(v),v.addChild(m),f.addChild(W),m.addChild(C)}
